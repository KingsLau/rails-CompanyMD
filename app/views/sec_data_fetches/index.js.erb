console.log("I am in report.js");
console.log('<%=@company.ticker%>');

if (document.querySelector('#reports-content[data-ticker="<%=@company.ticker%>"]').dataset.loaded == "false") {
  console.log('sec check');
  document.querySelector('#reports-content[data-ticker="<%=@company.ticker%>"]').innerHTML = `<%= render 'index', sec_data: @sec_data %>`;
  document.querySelector('#reports-content[data-ticker="<%=@company.ticker%>"]').dataset.loaded = "true";

  document.querySelector('#reports[data-ticker="<%=@company.ticker%>"]').addEventListener("click", () => {
  document.querySelector('#reports[data-ticker="<%=@company.ticker%>"]').classList.add("active");
    document.querySelector('#reports-content[data-ticker="<%=@company.ticker%>"]').style.display = "block";
    document.querySelector('#news-content[data-ticker="<%=@company.ticker%>"]').style.display = "none";
    document.querySelector('#financials-content[data-ticker="<%=@company.ticker%>"]').style.display = "none";
    document.querySelector('#financials[data-ticker="<%=@company.ticker%>"]').classList.remove("active");
    document.querySelector('#news[data-ticker="<%=@company.ticker%>"]').classList.remove("active");
    console.log('report click');
  });

  document.querySelector('#financials[data-ticker="<%=@company.ticker%>"]').addEventListener("click", () => {
    document.querySelector('#financials-content[data-ticker="<%=@company.ticker%>"]').style.display = "block";
    document.querySelector('#reports-content[data-ticker="<%=@company.ticker%>"]').style.display = "none";
    document.querySelector('#news-content[data-ticker="<%=@company.ticker%>"]').style.display = "none";
    document.querySelector('#reports[data-ticker="<%=@company.ticker%>"]').classList.remove("active");
    document.querySelector('#financials[data-ticker="<%=@company.ticker%>"]').classList.add("active");
    document.querySelector('#news[data-ticker="<%=@company.ticker%>"]').classList.remove("active");
    console.log('statement click');
  });

  document.querySelector('#news[data-ticker="<%=@company.ticker%>"]').addEventListener("click", () => {
    document.querySelector('#news-content[data-ticker="<%=@company.ticker%>"]').style.display = "block";
    document.querySelector('#reports-content[data-ticker="<%=@company.ticker%>"]').style.display = "none";
    document.querySelector('#financials-content[data-ticker="<%=@company.ticker%>"]').style.display = "none";
    document.querySelector('#reports[data-ticker="<%=@company.ticker%>"]').classList.remove("active");
    document.querySelector('#financials[data-ticker="<%=@company.ticker%>"]').classList.remove("active");
    document.querySelector('#news[data-ticker="<%=@company.ticker%>"]').classList.add("active");
    console.log('news click');
  });
  document.querySelector('#reports[data-ticker="<%=@company.ticker%>"]').click();
}
else{
  document.querySelector('#reports-content[data-ticker="<%=@company.ticker%>"]').innerHTML = `<%= render 'index'%>`;
}

